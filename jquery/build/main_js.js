"use strict";var formatFloat=function(t,r){return(Math.round(t*Math.pow(10,r))/Math.pow(10,r)).toFixed(r)},loanFormula={getRepayPerMouthPriceAi:function(t,r,a){var e=Math.pow(1+r,a);return t*r*e/(e-1)},getRepayInterestPerMouthAi:function(t,r,a,e){var o=[Math.pow(1+a,t),Math.pow(1+a,e)],p=o[0],A=o[1];return r*a*(p-A*(p-1)/(A-1))}};$(document).ready(function(){$(".calculate").click(function(){var t=$(".totalPrice").val()*$(".proportion").val()/10,r=$(".interest").val()/12/100,a=12*$(".period").val(),e={repayPerMouthObjAi:{repayInterestPerMouthArrAi:[],repayCapitalPerMouthArrAi:[],restCapitalArrAi:[],totalRepayedArrAi:[]},repayPerMouthObjAc:{repayInterestPerMouthArrAc:[],repayPerMouthPriceArrAc:[],restCapitalArrAc:[],totalRepayedArrAc:[]}},o=loanFormula.getRepayPerMouthPriceAi(t,r,a),p=t,A=0,i=t/a,l=t,u=0;!function(){for(var h=0;h<a;h++){var c=loanFormula.getRepayInterestPerMouthAi(h,t,r,a),n=o-c;p-=n,A+=o,e.repayPerMouthObjAi.repayInterestPerMouthArrAi.push(formatFloat(c,2)),e.repayPerMouthObjAi.repayCapitalPerMouthArrAi.push(formatFloat(n,2)),e.repayPerMouthObjAi.restCapitalArrAi.push(formatFloat(p,2)),e.repayPerMouthObjAi.totalRepayedArrAi.push(formatFloat(A,2));var s=t*r*(1-(h-1)/a),d=i+s;l-=i,u+=d,e.repayPerMouthObjAc.repayInterestPerMouthArrAc.push(formatFloat(s,2)),e.repayPerMouthObjAc.repayPerMouthPriceArrAc.push(formatFloat(d,2)),e.repayPerMouthObjAc.restCapitalArrAc.push(formatFloat(l,2)),e.repayPerMouthObjAc.totalRepayedArrAc.push(formatFloat(u,2))}}(),console.log(e);var h=o*a,c=h-t;$(".total-loan").html(formatFloat(t,2)),$(".total-interest-ai").html(formatFloat(c,2)),$(".total-repay-ai").html(formatFloat(h,2)),$(".repay-per-mouth-ai").html(formatFloat(o,2));for(var n=0;n<e.repayPerMouthObjAi.repayInterestPerMouthArrAi.length;n++){var s=$(".detail table");n%12+1==1&&s.append("<tr><td>第"+(parseInt(n/12)+1)+"年</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>"),s.append("<tr><td>"+(n%12+1)+"</td><td>"+formatFloat(o,2)+'(<span class="detail-capital">'+e.repayPerMouthObjAi.repayCapitalPerMouthArrAi[n]+'</span>/<span class="detail-interest">'+e.repayPerMouthObjAi.repayInterestPerMouthArrAi[n]+"</span>)</td><td>"+e.repayPerMouthObjAc.repayPerMouthPriceArrAc[n]+'(<span class="detail-capital">'+e.repayPerMouthObjAc.restCapitalArrAc[n]+'</span>/<span class="detail-interest">'+e.repayPerMouthObjAc.repayInterestPerMouthArrAc[n]+"</span>)</td><td>"+e.repayPerMouthObjAi.restCapitalArrAi[n]+"</td><td>"+e.repayPerMouthObjAc.restCapitalArrAc[n]+"</td><td>"+e.repayPerMouthObjAi.totalRepayedArrAi[n]+"</td><td>"+e.repayPerMouthObjAc.totalRepayedArrAc[n]+"</td></tr>")}})});